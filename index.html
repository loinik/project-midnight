<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes" /> 
    <title>Nancy Drew: Midnight in Salem</title>
    <link rel="stylesheet" href="common.css">
</head>
<body>
    <div id="cursor" style="position: absolute; z-index: 999"></div>
    <main id="game">
        
        <div id="uiFrame" style="position: absolute; z-index: 2"></div>
        <div id="scene" style="position: absolute; z-index: 1"></div>
    </main>
    <script src="Rect.js"></script>
    <script src="AR.js"></script>
    <script src="CursorInit.js"></script>
    
    <script src="Ciftree/s0.js"></script>
    <script src="Ciftree/s2600.js"></script>
    <script src="Ciftree/s2601.js"></script>
    <script src="Ciftree/s2602.js"></script>
    <script src="Ciftree/s2603.js"></script>
    <script src="Ciftree/s2610.js"></script>
    <script src="Ciftree/s2611.js"></script>
    <script src="Ciftree/s2612.js"></script>
    <script src="Ciftree/s2613.js"></script>
    <script src="Ciftree/s2620.js"></script>
    <script src="Ciftree/s2621.js"></script>
    <script src="Ciftree/s2622.js"></script>
    <script src="Ciftree/s2623.js"></script>
    <script src="Ciftree/s2625.js"></script>
    <script src="Ciftree/UI_Frame_SC.js"></script>
    <script src="Ciftree/UI_NotesTasklist_SC.js"></script>
    <script src="Ciftree/Cursors_SC.js"></script>

    <script>
        var body = document.querySelector("body");
        var gameFrame = document.querySelector("#game");
        var cursor = document.querySelector("#cursor");

        document.querySelector("#scene").innerHTML = "";
        s2600().forEach(element => {
            document.querySelector("#scene").append(element);
        });

        function autoResize() {
            game.style.transform = "scale(" + window.innerHeight / 768 + ")";
            cursor.style.transform = "scale(" + window.innerHeight / 768 + ")";
        }
        autoResize();
        
        window.addEventListener("resize", function(event) {
            autoResize()
        });
        
        document.addEventListener('orientationchange', function(event) {
            autoResize()
        });

        

        function openFullscreen() {
            if (body.requestFullscreen) {
                body.requestFullscreen();
            } else if (body.webkitRequestFullscreen) { /* Safari */
                body.webkitRequestFullscreen();
            } else if (body.msRequestFullscreen) { /* IE11 */
                body.msRequestFullscreen();
            }
        }

        document.addEventListener("keyup", function(event) {
            if (navigator.appVersion.indexOf('Mac') != -1 && (event.metaKey && event.key === "Enter")) {
                openFullscreen();
            } else if (event.altKey && event.key === "Enter") {
                openFullscreen();
            }
        }, false);

        document.addEventListener("mousemove", function(event) {
            let position = gameFrame.getBoundingClientRect();
            
            //alert(glass)
            cursor.style.position = "absolute";
            cursor.style.left = event.pageX + "px";
            cursor.style.top = event.pageY + "px";
            
        }, false);

    </script>
</body>
</html>